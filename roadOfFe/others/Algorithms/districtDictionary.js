var origin = [
  {
    province_name: "天津",
    province_code: "120000",
    city_name: "天津",
    city_code: "120100",
    districtsCup: [
      { value: "120101", label: "和平区" },
      { value: "120102", label: "河东区" },
      { value: "120103", label: "河西区" },
      { value: "120104", label: "南开区" },
      { value: "120105", label: "河北区" },
      { value: "120106", label: "红挢区" },
      { value: "120107", label: "滨海新区" },
      { value: "120108", label: "东丽区" },
      { value: "120109", label: "西青区" },
      { value: "120110", label: "津南区" },
      { value: "120111", label: "北辰区" },
      { value: "120112", label: "宁河区" },
      { value: "120113", label: "武清区" },
      { value: "120114", label: "静海县" },
      { value: "120115", label: "宝坻区" },
      { value: "120116", label: "蓟县" },
    ],
    limitIncomingCommunities:
      "上辛园A区,天津大学四季村,天津大学四季村,天津大学四季村四季村,天津大学新园村",
    presentCityBlackCommunity: {
      checkedOption: [
        100430000002795, 100430000012938, 100430000002916, 100430000013468,
        144530000071323,
      ],
      option: [
        100430000002795, 100430000012938, 100430000002916, 100430000013468,
        144530000071323, 144530000071323, 100430000021933, 100430000000230,
        100430000020156,
      ],
      list: [
        {
          indexCapital: "S",
          capitalCommunities: [
            {
              community_pinyin: "shangxinyuanAqu",
              publish_state: 0,
              latitude: 0,
              district_name: "西青区",
              address: "青沙路上辛园A区",
              longitude: 0,
              community_code: 100430000020156,
              community_name: "上辛园A区",
              district_code: 1445500027,
              community_alias_list: [],
              city_name: "天津",
              check_state: 1,
              province_name: "天津",
              city_code: 1445,
              province_code: 7,
              checked: false,
            },
          ],
        },
        {
          indexCapital: "T",
          capitalCommunities: [
            {
              community_pinyin: "tianjindaxuesijicun",
              publish_state: 0,
              province_code: 7,
              district_name: "南开区",
              district_code: 1445500022,
              longitude: 117.170906,
              community_code: 144530000071323,
              community_name: "天津大学四季村",
              community_alias_list: [],
              address: "天津市南开区天津大学四季村",
              city_name: "天津",
              check_state: 1,
              latitude: 39.116043,
              city_code: 1445,
              province_name: "天津",
              checked: false,
            },
            {
              community_pinyin: "tianjindaxuesijicun",
              publish_state: 0,
              province_code: 7,
              district_name: "南开区",
              district_code: 1445500022,
              longitude: 117.170906,
              community_code: 144530000071323,
              community_name: "天津大学四季村",
              community_alias_list: [],
              address: "天津市南开区天津大学四季村",
              city_name: "天津",
              check_state: 1,
              latitude: 39.116043,
              city_code: 1445,
              province_name: "天津",
              checked: false,
            },
            {
              community_pinyin: "tianjindaxuesijicunsijicun",
              publish_state: 0,
              province_code: 7,
              district_name: "南开区",
              district_code: 1445500022,
              longitude: 117.16985,
              community_code: 100430000021933,
              community_name: "天津大学四季村四季村",
              community_alias_list: [{ alias_name: "天津大学四季村" }],
              address: "天津市南开区天津大学四季村四季村",
              city_name: "天津",
              check_state: 1,
              latitude: 39.11438,
              city_code: 1445,
              province_name: "天津",
              checked: false,
            },
            {
              community_pinyin: "tianjindaxuexinyuancun",
              publish_state: 0,
              province_code: 7,
              district_name: "南开区",
              district_code: 1445500022,
              longitude: 117.166046,
              community_code: 100430000000230,
              community_name: "天津大学新园村",
              community_alias_list: [],
              address: "花堤路天津大学新园村",
              city_name: "天津",
              check_state: 0,
              latitude: 39.115486,
              city_code: 1445,
              province_name: "天津",
              checked: false,
            },
          ],
        },
      ],
    },
  },
  {
    province_name: "河北",
    province_code: "130000",
    city_name: "邯郸",
    city_code: "130400",
    districtsCup: [
      { value: "130401", label: "邯山区" },
      { value: "130402", label: "丛台区" },
      { value: "130403", label: "复兴区" },
      { value: "130404", label: "峰峰矿区" },
      { value: "130405", label: "邯郸县" },
      { value: "130406", label: "临漳县" },
      { value: "130407", label: "成安县" },
      { value: "130408", label: "大名县" },
      { value: "130409", label: "涉县" },
      { value: "130410", label: "磁县" },
      { value: "130411", label: "肥乡县" },
      { value: "130412", label: "永年县" },
      { value: "130413", label: "邱县" },
      { value: "130414", label: "鸡泽县" },
      { value: "130415", label: "广平县" },
      { value: "130416", label: "馆陶县" },
      { value: "130417", label: "魏县" },
      { value: "130418", label: "曲周县" },
      { value: "130419", label: "武安市" },
    ],
    limitIncomingCommunities: "六村",
    presentCityBlackCommunity: {
      checkedOption: [],
      option: [100430000002795],
      list: [
        {
          indexCapital: "L",
          capitalCommunities: [
            {
              community_pinyin: "liucun",
              publish_state: 0,
              province_code: 7,
              district_name: "复兴区",
              district_code: 1445500022,
              longitude: 117.16935,
              community_code: 100430000002795,
              community_name: "六村",
              community_alias_list: [],
              address: "南丰路六村",
              city_name: "邯郸",
              check_state: 0,
              latitude: 39.114105,
              city_code: 1445,
              province_name: "河北",
              checked: false,
            },
          ],
        },
      ],
    },
  },
];

var result = [
  {
    city_code: "120100",
    province_code: "120000",
    community_list: [
      {
        address: "青沙路上辛园A区",
        check_state: 1,
        checked: false,
        city_code: 1445,
        city_name: "天津",
        community_alias_list: [],
        community_code: 100430000020156,
        community_name: "上辛园A区",
        community_pinyin: "shangxinyuanAqu",
        district_code: 1445500027,
        district_name: "西青区",
        latitude: 0,
        longitude: 0,
        province_code: 7,
        province_name: "天津",
        publish_state: 0,
      },
      {
        address: "天津市南开区天津大学四季村",
        check_state: 1,
        checked: false,
        city_code: 1445,
        city_name: "天津",
        community_alias_list: [],
        community_code: 144530000071323,
        community_name: "天津大学四季村",
        community_pinyin: "tianjindaxuesijicun",
        district_code: 1445500022,
        district_name: "南开区",
        latitude: 39.116043,
        longitude: 117.170906,
        province_code: 7,
        province_name: "天津",
        publish_state: 0,
      },
      {
        address: "天津市南开区天津大学四季村",
        check_state: 1,
        checked: false,
        city_code: 1445,
        city_name: "天津",
        community_alias_list: [],
        community_code: 144530000071323,
        community_name: "天津大学四季村",
        community_pinyin: "tianjindaxuesijicun",
        district_code: 1445500022,
        district_name: "南开区",
        latitude: 39.116043,
        longitude: 117.170906,
        province_code: 7,
        province_name: "天津",
        publish_state: 0,
      },
      {
        address: "天津市南开区天津大学四季村四季村",
        check_state: 1,
        checked: false,
        city_code: 1445,
        city_name: "天津",
        community_alias_list: [{ alias_name: "天津大学四季村" }],
        community_code: 100430000021933,
        community_name: "天津大学四季村四季村",
        community_pinyin: "tianjindaxuesijicunsijicun",
        district_code: 1445500022,
        district_name: "南开区",
        latitude: 39.11438,
        longitude: 117.16985,
        province_code: 7,
        province_name: "天津",
        publish_state: 0,
      },
      {
        address: "花堤路天津大学新园村",
        check_state: 0,
        checked: false,
        city_code: 1445,
        city_name: "天津",
        community_alias_list: [],
        community_code: 100430000000230,
        community_name: "天津大学新园村",
        community_pinyin: "tianjindaxuexinyuancun",
        district_code: 1445500022,
        district_name: "南开区",
        latitude: 39.115486,
        longitude: 117.166046,
        province_code: 7,
        province_name: "天津",
        publish_state: 0,
      },
    ],
  },
  {
    city_code: "130400",
    province_code: "130000",
    community_list: [
      {
        address: "南丰路六村",
        check_state: 0,
        checked: false,
        city_code: 1445,
        city_name: "邯郸",
        community_alias_list: [],
        community_code: 100430000002795,
        community_name: "六村",
        community_pinyin: "liucun",
        district_code: 1445500022,
        district_name: "复兴区",
        latitude: 39.114105,
        longitude: 117.16935,
        province_code: 7,
        province_name: "河北",
        publish_state: 0,
      },
    ],
  },
];

function getSubmitData(origin) {
  if (!Array.isArray(origin)) return;

  let xx = origin.reduce((arr, item) => {
    let _arr = [];
    let obj = {
      city_code: item.city_code,
      province_code: item.province_code,
      community_list: [],
    };

    if (
      item.presentCityBlackCommunity &&
      item.presentCityBlackCommunity.list.length
    ) {
      let _communitys = item.presentCityBlackCommunity.list.map(
        (item) => item.capitalCommunities
      );

      obj.community_list = deepFlatten(_communitys);
    }

    arr.push(obj);

    return _arr.concat(arr);
  }, []);

  console.log(xx);
}

function deepFlatten(arr) {
  flatten = (arr) => [].concat(...arr);
  return flatten(arr.map((x) => (Array.isArray(x) ? deepFlatten(x) : x)));
}

getSubmitData(origin); // 预期得到result数据结构
