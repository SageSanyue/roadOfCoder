var origin = [
  {
    province_name: "天津",
    province_code: "120000",
    city_name: "天津",
    city_code: "120100",
    districtsCup: [
      { value: "120101", label: "和平区" },
      { value: "120102", label: "河东区" },
      { value: "120103", label: "河西区" },
      { value: "120104", label: "南开区" },
      { value: "120105", label: "河北区" },
      { value: "120106", label: "红挢区" },
      { value: "120107", label: "滨海新区" },
      { value: "120108", label: "东丽区" },
      { value: "120109", label: "西青区" },
      { value: "120110", label: "津南区" },
      { value: "120111", label: "北辰区" },
      { value: "120112", label: "宁河区" },
      { value: "120113", label: "武清区" },
      { value: "120114", label: "静海县" },
      { value: "120115", label: "宝坻区" },
      { value: "120116", label: "蓟县" },
    ],
    limitIncomingCommunities:
      "上辛园A区,天津大学四季村,天狮集团甲乙饼村,天津市立小学家属院,天河广场",
    presentCityCommunity: {
      checkedOption: [2795, 2938, 2916, 3468,1323],
      option: [2795, 2938, 2916, 3468,1323, 1323, 1933, 0230,0156],
      list: [
        {
          indexCapital: "S",
          capitalCommunities: [
            {
              address: "青沙路上辛园A区",
              city_code: 120100,
              city_name: "天津",
              community_code: 2795,
              community_name: "上辛园A区",
              community_pinyin: "shangxinyuanAqu",
              district_code: 120109,
              district_name: "西青区",
              province_code: 7,
              province_name: "天津",
            },
          ],
        },
        {
          indexCapital: "T",
          capitalCommunities: [
            {
              address: "天津市南开区天津大学四季村",
              city_code: 120100,
              city_name: "天津",
              community_code: 2938,
              community_name: "天津大学四季村",
              community_pinyin: "tianjindaxuesijicun",
              district_code: 120104,
              district_name: "南开区",
              province_code: 7,
              province_name: "天津",
            },
            {
              address: "天津市天狮集团甲乙饼村",
              city_code: 120100,
              city_name: "天津",
              community_code: 2916,
              community_name: "天狮集团甲乙饼村",
              community_pinyin: "tianshijituanjiayibingcun",
              district_code: 120104,
              district_name: "南开区",
              province_code: 7,
              province_name: "天津",
            },
            {
              address: "天津市立小学",
              city_code: 120100,
              city_name: "天津",
              community_code: 3468,
              community_name: "天津市立小学家属院",
              community_pinyin: "tianjinshilixiaoxuejiashuyuan",
              district_code: 120104,
              district_name: "南开区",
              province_code: 7,
              province_name: "天津",
            },
            {
              address: "花堤路天河广场",
              city_code: 120100,
              city_name: "天津",
              community_code: 1323,
              community_name: "天河广场",
              community_pinyin: "tianheguangchang",
              district_code: 120104,
              district_name: "南开区",
              province_code: 7,
              province_name: "天津",
            },
          ],
        },
      ],
    },
  },
  {
    province_name: "河北",
    province_code: "130000",
    city_name: "邯郸",
    city_code: "130400",
    districtsCup: [
      { value: "130401", label: "邯山区" },
      { value: "130402", label: "丛台区" },
      { value: "130403", label: "复兴区" },
      { value: "130404", label: "峰峰矿区" },
      { value: "130405", label: "邯郸县" },
      { value: "130406", label: "临漳县" },
      { value: "130407", label: "成安县" },
      { value: "130408", label: "大名县" },
      { value: "130409", label: "涉县" },
      { value: "130410", label: "磁县" },
      { value: "130411", label: "肥乡县" },
      { value: "130412", label: "永年县" },
      { value: "130413", label: "邱县" },
      { value: "130414", label: "鸡泽县" },
      { value: "130415", label: "广平县" },
      { value: "130416", label: "馆陶县" },
      { value: "130417", label: "魏县" },
      { value: "130418", label: "曲周县" },
      { value: "130419", label: "武安市" },
    ],
    limitIncomingCommunities: "六村",
    presentCityCommunity: {
      checkedOption: [],
      option: [2795],
      list: [
        {
          indexCapital: "L",
          capitalCommunities: [
            {
              address: "南丰路六村",
              city_code: 1445,
              city_name: "邯郸",
              community_code: 2795,
              community_name: "六村",
              community_pinyin: "liucun",
              district_code: 130403,
              district_name: "复兴区",
              province_code: 7,
              province_name: "河北",
            },
          ],
        },
      ],
    },
  },
];

var result = [
  {
    city_code: "120100",
    province_code: "120000",
    community_list: [
      {
        address: "青沙路上辛园A区",
        city_code: 120100,
        city_name: "天津",
        community_code: 2795,
        community_name: "上辛园A区",
        community_pinyin: "shangxinyuanAqu",
        district_code: 120109,
        district_name: "西青区",
        province_code: 7,
        province_name: "天津",
      },
      {
        address: "天津市南开区天津大学四季村",
        city_code: 120100,
        city_name: "天津",
        community_code: 2938,
        community_name: "天津大学四季村",
        community_pinyin: "tianjindaxuesijicun",
        district_code: 120104,
        district_name: "南开区",
        province_code: 7,
        province_name: "天津",
      },
      {
        address: "天津市天狮集团甲乙饼村",
        city_code: 120100,
        city_name: "天津",
        community_code: 2916,
        community_name: "天狮集团甲乙饼村",
        community_pinyin: "tianshijituanjiayibingcun",
        district_code: 120104,
        district_name: "南开区",
        province_code: 7,
        province_name: "天津",
      },
      {
        address: "天津市立小学",
        city_code: 1445,
        city_name: "天津",
        community_code: 3468,
        community_name: "天津市立小学家属院",
        community_pinyin: "tianjinshilixiaoxuejiashuyuan",
        district_code: 120104,
        district_name: "南开区",
        province_code: 7,
        province_name: "天津",
      },
      {
        address: "花堤路天河广场",
        city_code: 120100,
        city_name: "天津",
        community_code: 1323,
        community_name: "天河广场",
        community_pinyin: "tianheguangchang",
        district_code: 120104,
        district_name: "南开区",
        province_code: 7,
        province_name: "天津",
      },
    ],
  },
  {
    city_code: "130400",
    province_code: "130000",
    community_list: [
      {
        address: "南丰路六村",
        city_code: 1445,
        city_name: "邯郸",
        community_code: 2795,
        community_name: "六村",
        community_pinyin: "liucun",
        district_code: 130403,
        district_name: "复兴区",
        province_code: 7,
        province_name: "河北",
      },
    ],
  },
];

function getSubmitData(origin) {
  if (!Array.isArray(origin)) return;

  let xx = origin.reduce((arr, item) => {
    let _arr = [];
    let obj = {
      city_code: item.city_code,
      province_code: item.province_code,
      community_list: [],
    };

    if (
      item.presentCityCommunity &&
      item.presentCityCommunity.list.length
    ) {
      let _communitys = item.presentCityCommunity.list.map(
        (item) => item.capitalCommunities
      );

      obj.community_list = deepFlatten(_communitys);
    }

    arr.push(obj);

    return _arr.concat(arr);
  }, []);

  console.log(xx);
}

function deepFlatten(arr) {
  flatten = (arr) => [].concat(...arr);
  return flatten(arr.map((x) => (Array.isArray(x) ? deepFlatten(x) : x)));
}

getSubmitData(origin); // 预期得到result数据结构
